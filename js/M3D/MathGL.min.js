'use strict';var MATHGL=new(function(){this.MATRIX={};this.VECTOR={};var stack=new Array(100);var stackSize=100;var stackUsed=0;for(var i=0;i<100;i++){stack[i]=new Float32Array(16);}
var identityMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.MATRIX.makeMat4=function(numArray){var matrix=new Float32Array(numArray?numArray:identityMatrix);matrix.isMatrix=true;return matrix;};this.VECTOR.makeVector=function(x,y,z,w){return{x:x||0,y:y||0,z:z||0,w:w||0,isVector:true};};this.MATRIX.loadIdentity=function(mat){mat[0]=1;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=0;mat[5]=1;mat[6]=0;mat[7]=0;mat[8]=0;mat[9]=0;mat[10]=1;mat[11]=0;mat[12]=0;mat[13]=0;mat[14]=0;mat[15]=1;return mat;};this.MATRIX.add=function(mat1,mat2,dst){dst||(dst=mat1);dst[0]=mat1[0]+mat2[0];dst[1]=mat1[1]+mat2[1];dst[2]=mat1[2]+mat2[2];dst[3]=mat1[3]+mat2[3];dst[4]=mat1[4]+mat2[4];dst[5]=mat1[5]+mat2[5];dst[6]=mat1[6]+mat2[6];dst[7]=mat1[7]+mat2[7];dst[8]=mat1[8]+mat2[8];dst[9]=mat1[9]+mat2[9];dst[10]=mat1[10]+mat2[10];dst[11]=mat1[11]+mat2[11];dst[12]=mat1[12]+mat2[12];dst[13]=mat1[13]+mat2[13];dst[14]=mat1[14]+mat2[14];dst[15]=mat1[15]+mat2[15];return dst;};this.MATRIX.sub=function(mat1,mat2,dst){dst||(dst=mat1);dst[0]=mat1[0]-mat2[0];dst[1]=mat1[1]-mat2[1];dst[2]=mat1[2]-mat2[2];dst[3]=mat1[3]-mat2[3];dst[4]=mat1[4]-mat2[4];dst[5]=mat1[5]-mat2[5];dst[6]=mat1[6]-mat2[6];dst[7]=mat1[7]-mat2[7];dst[8]=mat1[8]-mat2[8];dst[9]=mat1[9]-mat2[9];dst[10]=mat1[10]-mat2[10];dst[11]=mat1[11]-mat2[11];dst[12]=mat1[12]-mat2[12];dst[13]=mat1[13]-mat2[13];dst[14]=mat1[14]-mat2[14];dst[15]=mat1[15]-mat2[15];return dst;};this.MATRIX.transpose=function(mat,dst){var t;dst||(dst=mat);t=mat[1];dst[1]=mat[4];dst[4]=t;t=mat[2];dst[2]=mat[8];dst[8]=t;t=mat[3];dst[3]=mat[12];dst[12]=t;t=mat[6];dst[6]=mat[9];dst[9]=t;t=mat[7];dst[7]=mat[13];dst[13]=t;t=mat[11];dst[11]=mat[14];dst[14]=t;dst[0]=mat[0];dst[5]=mat[5];dst[10]=mat[10];dst[15]=mat[15];return dst;};this.MATRIX.det=function(mat){return mat[0]*mat[5]*mat[10]*mat[15]
+mat[1]*mat[6]*mat[11]*mat[12]
+mat[2]*mat[7]*mat[8]*mat[13]
+mat[3]*mat[4]*mat[9]*mat[14]
-mat[12]*mat[9]*mat[6]*mat[3]
-mat[13]*mat[10]*mat[7]*mat[0]
-mat[14]*mat[11]*mat[4]*mat[1]
-mat[15]*mat[8]*mat[5]*mat[2];};this.MATRIX.cofactor=function(mat,dst){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;dst||(dst=mat);a=mat[0];b=mat[1];c=mat[2];d=mat[3];e=mat[4];f=mat[5];g=mat[6];h=mat[7];i=mat[8];j=mat[9];k=mat[10];l=mat[11];m=mat[12];n=mat[13];o=mat[14];p=mat[15];dst[0]=(f*k*p+g*l*n+h*j*o-n*k*h-o*l*f-p*j*g);dst[1]=-(e*k*p+g*l*m+h*i*o-m*k*h-o*l*e-p*i*g);dst[2]=(e*j*p+f*l*m+h*i*n-m*j*h-n*l*e-p*i*f);dst[3]=-(e*j*o+f*k*m+g*i*n-m*j*g-n*k*e-o*i*f);dst[4]=-(b*k*p+c*l*n+d*j*o-n*k*d-o*l*b-p*j*c);dst[5]=(a*k*p+c*l*m+d*i*o-m*k*d-o*l*a-p*i*c);dst[6]=-(a*j*p+b*l*m+d*i*n-m*j*d-n*l*a-p*i*b);dst[7]=(a*j*o+b*k*m+c*i*n-m*j*c-n*k*a-o*i*b);dst[8]=(b*g*p+c*h*n+d*f*o-n*g*d-o*h*b-p*f*c);dst[9]=-(a*g*p+c*h*m+d*e*o-m*g*d-o*h*a-p*e*c);dst[10]=(a*f*p+b*h*m+d*e*n-m*f*d-n*h*a-p*e*b);dst[11]=-(a*f*o+b*g*m+c*e*n-m*f*c-n*g*a-o*e*b);dst[12]=-(b*g*l+c*h*j+d*f*k-j*g*d-k*h*b-l*f*c);dst[13]=(a*g*l+c*h*i+d*e*k-i*g*d-k*h*a-l*e*c);dst[14]=-(a*f*l+b*h*i+d*e*j-i*f*d-j*h*a-l*e*b);dst[15]=(a*f*k+b*g*i+c*e*j-i*f*c-j*g*a-k*e*b);return mat;};this.MATRIX.adjunte=function(mat,dst){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;dst||(dst=mat);a=mat[0];b=mat[1];c=mat[2];d=mat[3];e=mat[4];f=mat[5];g=mat[6];h=mat[7];i=mat[8];j=mat[9];k=mat[10];l=mat[11];m=mat[12];n=mat[13];o=mat[14];p=mat[15];dst[0]=(f*k*p+g*l*n+h*j*o-n*k*h-o*l*f-p*j*g);dst[4]=-(e*k*p+g*l*m+h*i*o-m*k*h-o*l*e-p*i*g);dst[8]=(e*j*p+f*l*m+h*i*n-m*j*h-n*l*e-p*i*f);dst[12]=-(e*j*o+f*k*m+g*i*n-m*j*g-n*k*e-o*i*f);dst[1]=-(b*k*p+c*l*n+d*j*o-n*k*d-o*l*b-p*j*c);dst[5]=(a*k*p+c*l*m+d*i*o-m*k*d-o*l*a-p*i*c);dst[9]=-(a*j*p+b*l*m+d*i*n-m*j*d-n*l*a-p*i*b);dst[13]=(a*j*o+b*k*m+c*i*n-m*j*c-n*k*a-o*i*b);dst[2]=(b*g*p+c*h*n+d*f*o-n*g*d-o*h*b-p*f*c);dst[6]=-(a*g*p+c*h*m+d*e*o-m*g*d-o*h*a-p*e*c);dst[10]=(a*f*p+b*h*m+d*e*n-m*f*d-n*h*a-p*e*b);dst[14]=-(a*f*o+b*g*m+c*e*n-m*f*c-n*g*a-o*e*b);dst[3]=-(b*g*l+c*h*j+d*f*k-j*g*d-k*h*b-l*f*c);dst[7]=(a*g*l+c*h*i+d*e*k-i*g*d-k*h*a-l*e*c);dst[11]=-(a*f*l+b*h*i+d*e*j-i*f*d-j*h*a-l*e*b);dst[15]=(a*f*k+b*g*i+c*e*j-i*f*c-j*g*a-k*e*b);return mat;};this.MATRIX.invert=function(mat,dst){var det;var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;dst||(dst=mat);a=mat[0];b=mat[1];c=mat[2];d=mat[3];e=mat[4];f=mat[5];g=mat[6];h=mat[7];i=mat[8];j=mat[9];k=mat[10];l=mat[11];m=mat[12];n=mat[13];o=mat[14];p=mat[15];det=a*f*k*p+b*g*l*m+c*h*i*n+d*e*j*o;det-=m*j*g*d+n*k*h*a+o*l*e*b+p*i*f*c;if(det!==0){dst[0]=(f*k*p+g*l*n+h*j*o-n*k*h-o*l*f-p*j*g)/det;dst[4]=(e*k*p+g*l*m+h*i*o-m*k*h-o*l*e-p*i*g)/-det;dst[8]=(e*j*p+f*l*m+h*i*n-m*j*h-n*l*e-p*i*f)/det;dst[12]=(e*j*o+f*k*m+g*i*n-m*j*g-n*k*e-o*i*f)/-det;dst[1]=(b*k*p+c*l*n+d*j*o-n*k*d-o*l*b-p*j*c)/-det;dst[5]=(a*k*p+c*l*m+d*i*o-m*k*d-o*l*a-p*i*c)/det;dst[9]=(a*j*p+b*l*m+d*i*n-m*j*d-n*l*a-p*i*b)/-det;dst[13]=(a*j*o+b*k*m+c*i*n-m*j*c-n*k*a-o*i*b)/det;dst[2]=(b*g*p+c*h*n+d*f*o-n*g*d-o*h*b-p*f*c)/det;dst[6]=(a*g*p+c*h*m+d*e*o-m*g*d-o*h*a-p*e*c)/-det;dst[10]=(a*f*p+b*h*m+d*e*n-m*f*d-n*h*a-p*e*b)/det;dst[14]=(a*f*o+b*g*m+c*e*n-m*f*c-n*g*a-o*e*b)/-det;dst[3]=(b*g*l+c*h*j+d*f*k-j*g*d-k*h*b-l*f*c)/-det;dst[7]=(a*g*l+c*h*i+d*e*k-i*g*d-k*h*a-l*e*c)/det;dst[11]=(a*f*l+b*h*i+d*e*j-i*f*d-j*h*a-l*e*b)/-det;dst[15]=(a*f*k+b*g*i+c*e*j-i*f*c-j*g*a-k*e*b)/det;}
return mat;};this.MATRIX.multiply=function(mat1,mat2,dst){var x,y,z,w;var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;dst||(dst=mat1);a=mat2[0];b=mat2[1];c=mat2[2];d=mat2[3];e=mat2[4];f=mat2[5];g=mat2[6];h=mat2[7];i=mat2[8];j=mat2[9];k=mat2[10];l=mat2[11];m=mat2[12];n=mat2[13];o=mat2[14];p=mat2[15];x=mat1[0];y=mat1[1];z=mat1[2];w=mat1[3];dst[0]=x*a+y*e+z*i+w*m;dst[1]=x*b+y*f+z*j+w*n;dst[2]=x*c+y*g+z*k+w*o;dst[3]=x*d+y*h+z*l+w*p;x=mat1[4];y=mat1[5];z=mat1[6];w=mat1[7];dst[4]=x*a+y*e+z*i+w*m;dst[5]=x*b+y*f+z*j+w*n;dst[6]=x*c+y*g+z*k+w*o;dst[7]=x*d+y*h+z*l+w*p;x=mat1[8];y=mat1[9];z=mat1[10];w=mat1[11];dst[8]=x*a+y*e+z*i+w*m;dst[9]=x*b+y*f+z*j+w*n;dst[10]=x*c+y*g+z*k+w*o;dst[11]=x*d+y*h+z*l+w*p;x=mat1[8];y=mat1[9];z=mat1[10];w=mat1[11];dst[12]=x*a+y*e+z*i+w*m;dst[13]=x*b+y*f+z*j+w*n;dst[14]=x*c+y*g+z*k+w*o;dst[15]=x*d+y*h+z*l+w*p;return dst;};this.MATRIX.multiplyTranspose=function(mat1,mat2,dst){var x,y,z,w;var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;dst||(dst=mat1);a=mat2[0];b=mat2[1];c=mat2[2];d=mat2[3];e=mat2[4];f=mat2[5];g=mat2[6];h=mat2[7];i=mat2[8];j=mat2[9];k=mat2[10];l=mat2[11];m=mat2[12];n=mat2[13];o=mat2[14];p=mat2[15];x=mat1[0];y=mat1[1];z=mat1[2];w=mat1[3];dst[0]=x*a+y*b+z*c+w*d;dst[1]=x*e+y*f+z*g+w*h;dst[2]=x*i+y*j+z*k+w*l;dst[3]=x*m+y*n+z*o+w*p;x=mat1[4];y=mat1[5];z=mat1[6];w=mat1[7];dst[0]=x*a+y*b+z*c+w*d;dst[1]=x*e+y*f+z*g+w*h;dst[2]=x*i+y*j+z*k+w*l;dst[3]=x*m+y*n+z*o+w*p;x=mat1[8];y=mat1[9];z=mat1[10];w=mat1[11];dst[4]=x*a+y*b+z*c+w*d;dst[5]=x*e+y*f+z*g+w*h;dst[6]=x*i+y*j+z*k+w*l;dst[7]=x*m+y*n+z*o+w*p;x=mat1[8];y=mat1[9];z=mat1[10];w=mat1[11];dst[8]=x*a+y*b+z*c+w*d;dst[9]=x*e+y*f+z*g+w*h;dst[10]=x*i+y*j+z*k+w*l;dst[11]=x*m+y*n+z*o+w*p;return dst;};this.MATRIX.multiplyScalar=function(mat,scalar,dst){scalar||(scalar=1);dst||(dst=mat);dst[0]=mat[0]*scalar;dst[1]=mat[1]*scalar;dst[2]=mat[2]*scalar;dst[3]=mat[3]*scalar;dst[4]=mat[4]*scalar;dst[5]=mat[5]*scalar;dst[6]=mat[6]*scalar;dst[7]=mat[7]*scalar;dst[8]=mat[8]*scalar;dst[9]=mat[9]*scalar;dst[10]=mat[10]*scalar;dst[11]=mat[11]*scalar;dst[12]=mat[12]*scalar;dst[13]=mat[13]*scalar;dst[14]=mat[14]*scalar;dst[15]=mat[15]*scalar;return dst;};this.MATRIX.translate=function(mat,Tx,Ty,Tz){var a,b,c,d;a=mat[0];b=mat[4];c=mat[8];d=mat[12];Tx?mat[12]=Tx*a+Ty*b+Tz*c+d:0.0;a=mat[1];b=mat[5];c=mat[9];d=mat[13];Ty?mat[13]=Tx*a+Ty*b+Tz*c+d:0.0;a=mat[2];b=mat[6];c=mat[10];d=mat[14];Tz?mat[14]=Tx*a+Ty*b+Tz*c+d:0.0;return mat;};this.MATRIX.scale=function(mat,Sx,Sy,Sz){mat[0]*=Sx;mat[1]*=Sx;mat[2]*=Sx;mat[3]*=Sx;mat[4]*=Sy;mat[5]*=Sy;mat[6]*=Sy;mat[7]*=Sy;mat[8]*=Sz;mat[9]*=Sz;mat[10]*=Sz;mat[11]*=Sz;return mat;};this.MATRIX.rotateX=function(mat,alpha,isRadian){var y,z;var s,c;if(alpha){isRadian||(alpha*=Math.PI/180);s=Math.sin(alpha);c=Math.cos(alpha);y=mat[4];z=mat[8];mat[4]=y*c+z*s;mat[8]=-y*s+z*c;y=mat[5];z=mat[9];mat[5]=y*c+z*s;mat[9]=-y*s+z*c;y=mat[6];z=mat[10];mat[6]=y*c+z*s;mat[10]=-y*s+z*c;y=mat[7];z=mat[11];mat[7]=y*c+z*s;mat[11]=-y*s+z*c;}
return mat;};this.MATRIX.rotateY=function(mat,beta,isRadian){var x,z;var s,c;if(mat&&beta){isRadian||(beta*=Math.PI/180);s=Math.sin(beta);c=Math.cos(beta);x=mat[0];z=mat[8];mat[0]=x*c-z*s;mat[8]=x*s+z*c;x=mat[1];z=mat[9];mat[1]=x*c-z*s;mat[9]=x*s+z*c;x=mat[2];z=mat[10];mat[2]=x*c-z*s;mat[10]=x*s+z*c;x=mat[3];z=mat[11];mat[3]=x*c-z*s;mat[11]=x*s+z*c;}
return mat;};this.MATRIX.rotateZ=function(mat,omega,isRadian){var x,y;var s,c;if(mat&&omega){isRadian||(omega*=Math.PI/180);s=Math.sin(omega);c=Math.cos(omega);x=mat[0];y=mat[4];mat[0]=x*c+y*s;mat[4]=-x*s+y*c;x=mat[1];y=mat[5];mat[1]=x*c+y*s;mat[5]=-x*s+y*c;x=mat[2];y=mat[6];mat[2]=x*c+y*s;mat[6]=-x*s+y*c;x=mat[3];y=mat[7];mat[3]=x*c+y*s;mat[7]=-x*s+y*c;}
return mat;};this.MATRIX.loockAt=function(mat,x,y,z,atx,aty,atz,upx,upy,upz){var vxX,vxY,vxZ;var vyX,vyY,vyZ;var vzX,vzY,vzZ;var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;a=mat[0];b=mat[1];c=mat[2];d=mat[3];e=mat[4];f=mat[5];g=mat[6];h=mat[7];i=mat[8];j=mat[9];k=mat[10];l=mat[11];m=mat[12];n=mat[13];o=mat[14];p=mat[15];vzX=x-atx;vzY=y-aty;vzZ=z-atz;length=Math.sqrt(vzX*vzX+vzY*vzY+vzZ*vzZ);if(length!==0){vzX/=length;vzY/=length;vzZ/=length;}
vxX=upy*vzZ-upz*vzY;vxY=upz*vzX-upx*vzZ;vxZ=upx*vzY-upy*vzX;length=Math.sqrt(vxX*vxX+vxY*vxY+vxZ*vxZ);if(length!==0){vxX/=length;vxY/=length;vxZ/=length;}
vyX=vzY*vxZ-vzZ*vxY;vyY=vzZ*vxX-vzX*vxZ;vyZ=vzX*vxY-vzY*vxX;length=Math.sqrt(vyX*vyX+vyY*vyY+vyZ*vyZ);if(length!==0){vyX/=length;vyY/=length;vyZ/=length;}
mat[0]=vxX*a+vxY*e+vxZ*i;mat[1]=vxX*b+vxY*f+vxZ*j;mat[2]=vxX*c+vxY*g+vxZ*k;mat[3]=vxX*d+vxY*h+vxZ*l;mat[4]=vyX*a+vyY*e+vyZ*i;mat[5]=vyX*b+vyY*f+vyZ*j;mat[6]=vyX*c+vyY*g+vyZ*k;mat[7]=vyX*d+vyY*h+vyZ*l;mat[8]=vzX*a+vzY*e+vzZ*i;mat[9]=vzX*b+vzY*f+vzZ*j;mat[10]=vzX*c+vzY*g+vzZ*k;mat[11]=vzX*d+vzY*h+vzZ*l;mat[12]=x*a+y*e+z*i+m;mat[13]=x*b+y*f+z*j+n;mat[14]=x*c+y*g+z*k+o;mat[15]=x*d+y*h+z*l+p;return mat;};this.MATRIX.project=function(mat,fieldOfView,isRadian,ratio,znear,zfar){isRadian||(fieldOfView=fieldOfView/180*Math.PI);var fv=1.0/Math.tan(fieldOfView/2);var inversev=1/(znear-zfar);var x,y,z,w;var i,j,k,l;x=fv/ratio;mat[0]*=x;mat[1]*=x;mat[2]*=x;mat[3]*=x;y=fv;mat[4]*=y;mat[5]*=y;mat[6]*=y;mat[7]*=y;i=mat[8];j=mat[9];k=mat[10];l=mat[11];z=(zfar+znear)*inversev;w=(zfar*znear*inversev*2);mat[8]=z*i+w*mat[12];mat[9]=z*j+w*mat[13];mat[10]=z*k+w*mat[14];mat[11]=z*l+w*mat[15];z=-1;mat[12]=z*i;mat[13]=z*j;mat[14]=z*k;mat[15]=z*l;return mat;};this.MATRIX.push=function(mat){var stackTop;var size=stackSize;var used=stackUsed;if(mat){used<size||(stack[size]=new Float32Array(16));stackTop=stack[used];stackTop[0]=mat[0];stackTop[1]=mat[1];stackTop[2]=mat[2];stackTop[3]=mat[3];stackTop[4]=mat[4];stackTop[5]=mat[5];stackTop[6]=mat[6];stackTop[7]=mat[7];stackTop[8]=mat[8];stackTop[9]=mat[9];stackTop[10]=mat[10];stackTop[11]=mat[11];stackTop[12]=mat[12];stackTop[13]=mat[13];stackTop[14]=mat[14];stackTop[15]=mat[15];stackUsed++;}
return mat;};this.MATRIX.pop=function(mat){var stackTop;var used=this.stackUsed;if(mat){stackTop=used>=0?stack[used]:identityMatrix;mat[0]=stackTop[0];mat[1]=stackTop[1];mat[2]=stackTop[2];mat[3]=stackTop[3];mat[4]=stackTop[4];mat[5]=stackTop[5];mat[6]=stackTop[6];mat[7]=stackTop[7];mat[8]=stackTop[8];mat[9]=stackTop[9];mat[10]=stackTop[10];mat[11]=stackTop[11];mat[12]=stackTop[12];mat[13]=stackTop[13];mat[14]=stackTop[14];mat[15]=stackTop[15];stackUsed--;}
return mat;};this.MATRIX.copy=function(mat,dst){if(mat&dst){dst[0]=mat[0];dst[1]=mat[1];dst[2]=mat[2];dst[3]=mat[3];dst[4]=mat[4];dst[5]=mat[5];dst[6]=mat[6];dst[7]=mat[7];dst[8]=mat[8];dst[9]=mat[9];dst[10]=mat[10];dst[11]=mat[11];dst[12]=mat[12];dst[13]=mat[13];dst[14]=mat[14];dst[15]=mat[15];}
return mat;};this.VECTOR.length=function(vec){return Math.sqrt(vec.x*vec.x+vec.y*vec.y+vec.z*vec.z+vec.w*vec.w);};this.VECTOR.dot=function(vec1,vec2){return vec1.x*vec2.x+vec1.y*vec2.y+vec1.z*vec2.z+vec1.w*vec2.w;};this.VECTOR.cross=function(vec1,vec2,dst){var vx=vec1.x;var vy=vec1.y;var vz=vec1.z;dst||(dst=vec1);vec1.x=vy*vec2.z-vz*vec2.y;vec1.y=vz*vec2.x-vx*vec2.z;vec1.z=vx*vec2.y-vy*vec2.z;return dst;};this.VECTOR.normalize=function(vec,dst){dst||(dst=vec);var length=Math.sqrt(vec.x*vec.x+vec.y*vec.y+vec.z*vec.z+vec.w*vec.w)||1;dst.x=vec.x/length;dst.y=vec.y/length;dst.z=vec.z/length;dst.w=vec.w/length;return dst;};this.VECTOR.diference=function(vec1,vec2,dst){dst||(dst=vec1);dst.x=vec1.x-vec2.x;dst.y=vec1.y-vec2.y;dst.z=vec1.z-vec2.z;dst.w=vec1.w-vec2.w;return dst;};this.VECTOR.add=function(vec1,vec2,dst){dst||(dst=vec1);dst.x=vec1.x+vec2.x;dst.y=vec1.y+vec2.y;dst.z=vec1.z+vec2.z;dst.w=vec1.w+vec2.w;return dst;};this.VECTOR.multiply=function(vec1,vec2,dst){dst||(dst=vec1);dst.x=vec1.x*vec2.x;dst.y=vec1.y*vec2.y;dst.z=vec1.z*vec2.z;dst.w=vec1.w*vec2.w;return dst;};this.VECTOR.multiplyScalar=function(vec,scalar,dst){dst||(dst=vec);scalar||(scalar=1);dst.x=vec.x*scalar;dst.y=vec.y*scalar;dst.z=vec.z*scalar;dst.w=vec.w*scalar;return dst;};this.VECTOR.divide=function(vec1,vec2,dst){dst||(dst=vec1);dst.x=vec1.x/vec2.x;dst.y=vec1.y/vec2.y;dst.z=vec1.z/vec2.z;dst.w=vec1.w/vec2.w;return dst;};this.VECTOR.rotateX=function(vec,alpha,isRadian){var s,c;var y;if(alpha){isRadian||(alpha*=Math.PI/180);y=vec.y;s=Math.sin(alpha);c=Math.cos(alpha);vec.y=y*c-vec.z*s;vec.z=y*s+vec.z*c;}
return vec;};this.VECTOR.rotateY=function(vec,beta,isRadian){var s,c;var x;if(beta){isRadian||(beta*=Math.PI/180);x=vec.x;s=Math.sin(beta);c=Math.cos(beta);vec.x=vec.z*s+x*c;vec.z=vec.z*c-x*s;}
return vec;};this.VECTOR.rotateZ=function(vec,ganma,isRadian){var s,c;var x;if(ganma){isRadian||(ganma*=Math.PI/180);x=vec.x;s=Math.sin(ganma);c=Math.cos(ganma);vec.x=x*c-vec.y*s;vec.y=x*s+vec.y*c;}
return vec;};this.VECTOR.multiplyMatrix=function(op1,op2,dst){var x,y,z,w;if(op1&&op2){if(op1.isMatrix&&op2.isVector){dst||(dst=op2);x=op2.x;y=op2.y;z=op2.z;w=op2.w;dst.x=op1[0]*x+op1[1]*y+op1[2]*z+op1[3]*w;dst.y=op1[4]*x+op1[5]*y+op1[6]*z+op1[7]*w;dst.z=op1[8]*x+op1[9]*y+op1[10]*z+op1[11]*w;dst.w=op1[12]*x+op1[13]*y+op1[14]*z+op1[15]*w;}else{dst||(dst=op1);x=op1.x;y=op1.y;z=op1.z;w=op1.w;dst.x=x*op2[0]+y*op2[4]+z*op2[8]+w*op2[12];dst.y=x*op2[1]+y*op2[5]+z*op2[9]+w*op2[13];dst.z=x*op2[2]+y*op2[6]+z*op2[10]+w*op2[14];dst.w=x*op2[3]+y*op2[7]+z*op2[11]+w*op2[15];}}
return dst;};})();